## TCP的成块数据流
- - - 

### 目录



* * * 

### 滑动窗口
滑动窗口表示接受者的接收能力，缓冲区最大能接收多少数据。  
通常，滑动窗口有三个术语来描述它的运动：  

- 窗口合拢：窗口左边沿向右边沿靠近。发生在数据发送和确认时。   
- 窗口张开：窗口右边沿向右移动时，允许发送更多的数据。发生在另一端的接收进程读取已经确认的数据并释放TCP的接收缓存时。  
- 窗口收缩：窗口右边沿向左移动时，不建议使用。  

如果左边沿到达右边沿，称为一个零窗口。此时发送方不能发送任何数据。  

### 窗口大小 

- 滑动窗口大小通常由接收进程控制。
- socket API接口可以设置发送和接收缓存的大小。接收缓存的大小应该是该连接上所能通告的最大窗口大小。  

### PUSH标志
发送方使用PUSH标志通知接收方将所接收到的数据全部提交给用户接收进程。这里的数据包括：与PUSH一起传送的数据以及接收方TCP已经接收的到其他数据。  
目前，大多数的API没有向应用程序提供通知其TCP设置PUSH标志的方法。  

### 慢启动

- 当发送者和接收者处于同一局域网中时，使用滑动窗口是可以的。但如果发送方和接收方之间存在多个路由器和速率较慢的链路时，就有可能出现一些问题。因为一些中间路由器必须缓存分组，并可能耗尽存储器的空间。这就会严重降低了TCP连接的吞吐量。慢启动可以改善上述情况。  
- 慢启动为发送方的TCP增加了另一个窗口：拥塞窗口。  
- 当与另一网络的主机建立TCP连接时，拥塞窗口被初始化为1个报文段。每收到一个ACK，拥塞窗口就增加一个报文段。发送方取拥塞窗口与滑动窗口中的最小值作为发送上限。  
- 拥塞窗口是发送方的流量控制，滑动窗口是接收方的流量控制。  

### 拥塞 

- 当数据从一个快速局域网并向一个较慢的广域网时，发送时便会发送拥塞；  
- 当多个输入流到达一个路由器，而路由器的输出流小于这些输入流的总和时也会发生拥塞；  


